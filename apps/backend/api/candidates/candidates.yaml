summary: 'Create and read candidates'
description: |
  A candidate is always linked to one election and can be linked to several ballot paper sections.
  You can create a new one ore read all the existing ones for an election.
post:
  tags:
    - Candidates
  summary: 'Create a candidate'
  description: |
    Creates a candidate with a link to an election and ballot paper sections.
    The user of the API access token needs access to the linked election.
    The candidate can only be created if the linked election is not frozen.

    This endpoint is currently only a draft and not implemented!
    When this endpoint is implemented this note will be removed.
  security:
    - voturaBackendAuth: []
  operationId: 'createCandidate'
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: './schemas.yaml#/components/schemas/candidateCreateObject'
  responses:
    '201':
      description: |
        Created.
        The request was successfully executed.
        Successfully created a new candidate.
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/components/schemas/candidateReadObject'
    '400':
      $ref: './../globals/responses.yaml#/components/responses/400'
    '401':
      $ref: './../globals/responses.yaml#/components/responses/401'
    '403':
      $ref: './../globals/responses.yaml#/components/responses/403'
    '404':
      $ref: './../globals/responses.yaml#/components/responses/404'
    '406':
      $ref: './../globals/responses.yaml#/components/responses/406'
    '415':
      $ref: './../globals/responses.yaml#/components/responses/415'
    '429':
      $ref: './../globals/responses.yaml#/components/responses/429'
    default:
      $ref: './../globals/responses.yaml#/components/responses/500'
get:
  tags:
    - Candidates
  summary: 'Get all candidates for an election'
  description: |
    Returns all candidates with the public information fields, that are linked to the specified election. 
    The user of the API access token need the access rights to the election to read the candidate.

    This endpoint is currently only a draft and not implemented!
    When this endpoint is implemented this note will be removed.
  security:
    - voturaBackendAuth: []
  operationId: 'getCandidates'
  parameters:
    - name: 'electionId'
      in: 'query'
      description: |
        The ID of the election for which you want to get the candidates.
      required: true
      schema:
        $ref: './../globals/schemas.yaml#/components/schemas/uuid'
    - name: 'limit'
      in: 'query'
      description: |
        You can limit the number of returned items in the response array.
      required: false
      schema:
        type: 'integer'
        format: 'int8'
        minimum: 0
        maximum: 50
        example: 42
        default: 20
    - name: 'sortBy'
      in: 'query'
      description: |
        You can sort your response items by providing the key name to your field which you want to sort.
      required: false
      schema:
        type: 'string'
        enum:
          - createdAt
          - modifiedAt
          - title
          - description
          - election
        example: 'modifiedAt'
    - name: 'orderBy'
      in: 'query'
      description: |
        You can specify in which order you want to get your items.
        By default in `asc` (ascending) or when you wish `desc`(descending).
      # Currently I see no need for supporting multi-field sorting. If there is one, we need to update it.
      required: false
      schema:
        type: 'string'
        enum:
          - asc
          - desc
        example: 'asc'
  responses:
    '200':
      description: |
        OK.
        The request was successfully executed.
        Returns candidates for the requested election.
      content:
        application/json:
          schema:
            type: 'array'
            minItems: 0
            maxItems: 50
            uniqueItems: true
            items:
              $ref: './schemas.yaml#/components/schemas/candidateReadObject'
    '400':
      $ref: './../globals/responses.yaml#/components/responses/400'
    '401':
      $ref: './../globals/responses.yaml#/components/responses/401'
    '403':
      $ref: './../globals/responses.yaml#/components/responses/403'
    '404':
      $ref: './../globals/responses.yaml#/components/responses/404'
    '406':
      $ref: './../globals/responses.yaml#/components/responses/406'
    '429':
      $ref: './../globals/responses.yaml#/components/responses/429'
    default:
      $ref: './../globals/responses.yaml#/components/responses/500'
