summary: 'Mange access tokens'
description: |
  The API access token is needed to authenticate and authorize the user.
  The token is necessary to use several API endpoints.
  The token is valid for 1 hour or until the user requests a new one.
  After that, a new token must be requested.
  By authenticate the user by email and password, the user gets a token.
post:
  tags:
    - Users
  summary: 'Create new user API token'
  description: |
    Returns the new generated access token for the user.
    Any old token will be invalidated.
  operationId: 'createUserAPIToken'
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: './schemas.yaml#/components/schemas/userLoginObject'
  security: []
  responses:
    '201':
      description: |
        Created.
        The request was successful executed.
        Returns a new API access token for the user.
      content:
        application/json:
          schema:
            $ref: './schemas.yaml#/components/schemas/apiTokenObject'
    '400':
      $ref: './../globals/responses.yaml#/components/responses/400'
    '401':
      $ref: './../globals/responses.yaml#/components/responses/401'
    '406':
      $ref: './../globals/responses.yaml#/components/responses/406'
    '415':
      $ref: './../globals/responses.yaml#/components/responses/415'
    '429':
      $ref: './../globals/responses.yaml#/components/responses/429'
    default:
      $ref: './../globals/responses.yaml#/components/responses/500'
delete:
  tags:
    - Users
  summary: 'Revoke user API token'
  description: |
    Revokes and deletes the current API access token for the user.
  operationId: 'deleteUserAPIToken'
  security:
    - voturaBackendAuth: []
  responses:
    '200':
      description: |
        OK.
        The API access token was successfully revoked for the user.
      content:
        application/json:
          schema:
            type: object
            additionalProperties: false
            properties:
              message:
                type: string
                minLength: 1
                maxLength: 256
                pattern: '^[a-zA-Z0-9 .,\-_:;!?()\]{1,256}$'
                example: Token for user 123e4567-e89b-12d3-a456-426614174000 was revoked successfully.
    '400':
      $ref: './../globals/responses.yaml#/components/responses/400'
    '401':
      $ref: './../globals/responses.yaml#/components/responses/401'
    '403':
      $ref: './../globals/responses.yaml#/components/responses/403'
    '404':
      $ref: './../globals/responses.yaml#/components/responses/404'
    '406':
      $ref: './../globals/responses.yaml#/components/responses/406'
    '429':
      $ref: './../globals/responses.yaml#/components/responses/429'
    default:
      $ref: './../globals/responses.yaml#/components/responses/500'